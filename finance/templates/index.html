{% extends "layout.html" %}

{% block title %}
    PORTFOLIO
{% endblock %}

{% block main %}
<table class = "table">
        <thead>
            <tr>

            <th scope = "col">Stock</th>
            <th scope = "col">Shares Held</th>
            <th scope = "col">Current Value</th>
            <th scope = "col">Current Price</th>

            </tr>
        </thead>

        <tbody>

        {% for row in rows %}

        <tr>

        <td>{{row["symbol"]}}</td>
        <td>{{row["SUM(quantity)"]}}</td>
        <td>{{row["value"]}}</td>
        <td>{{row["price"]}}</td>



        <td>
            <form action="/buy" method="post">
                <input type="number" name="numshares">
                <button class="btn btn-primary" type="submit" name="stksymbol" value="{{row["symbol"]}}">Buy</button>
            </form>
        </td>

        <td>
           <form action="/sell" method="post">
                <input type="number" name="numshares">
                <button class="btn btn-primary" type="submit" name="stksymbol" value="{{row["symbol"]}}">Sell</button>
            </form>
        </td>

        </tr>

        {% endfor %}

        <tr>
            <td colspan="3">Total Stock Value</td>
            <td>{{total_stock_value}}</td>
        </tr>
        <tr>
            <td colspan="3">Available Funds</td>
            <td>{{cash}}</td>
        </tr>
        <tr>
            <td colspan="3">Portfolio Value</td>
            <td>{{portfolio}}</td>
        </tr>
        </tbody>
    </table>

    <!--<script>

        document.querySelector('#buybutton').onclick = function(){
            $.post('/buy', {numshares : $('input[name="buy_shares"]').val() , stksymbol : $('button[name="buybutton"]').val()});
        };

    </script>-->

{% endblock %}




